<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <title>Questão 03</title>
</head>

<body>
    <h1>Questão 03</h1>
    <form name="convidado">
        <input type="hidden" name="id">
        <label for="nomeFormulario">Nome: </label>
        <input type="text" name="nome" required id="nomeFormulario">
        <label for="idadeFormulario">Idade: </label>
        <input type="number" step="0.01" name="idade" required id="idadeFormulario">
        <input type="submit" id="botaoSubmit">
    </form>
    <button type="button" name="deletar" style="display: none">Apagar</button>
    <button type="button" name="editar" style="display: none">Editar</button>
    <table>
        <h2>Adulto</h2>
        <ul>

        </ul>
        <h2>Estudante</h2>
        <ul>

        </ul>
    </table>
    <script>
        var id = 0;
        var convidado = [];
        var listaAdulto = document.getElementsByTagName("ul")[0];
        var listaEstudante = document.getElementsByTagName("ul")[1];
        document.forms.convidado.addEventListener("submit", criarLista);
        function criarLista(e) {
            e.preventDefault();
            var nome = document.forms.convidado.nome.value;
            var idade = document.forms.convidado.idade.value;
            var novoConvidado = { 'Id': id, 'Nome': nome, 'Idade': idade };
            novoLi = document.createElement("li");
            novoLi.id = id;
            novoLi.addEventListener('click', show);
            novoLi.textContent = novoConvidado.Nome + " -  " + idade + ".";
            if (idade >= 18) {
                convidado.push(novoConvidado);
                listaAdulto.appendChild(novoLi);
                id++;

            } else {
                convidado.push(novoConvidado);
                listaEstudante.appendChild(novoLi);
                id++;

            }
            limparFormulario();
            function show() {
                var apagar = document.getElementsByTagName("button")[0];
                var editar = document.getElementsByTagName("button")[1];
                editar.style.display = "initial";
                editar.addEventListener('click', editarConvidado);
                apagar.addEventListener('click', apagarConvidado);
                apagar.style.display = "initial";
                document.forms.convidado.nome.value = nome;
                document.forms.convidado.idade.value = idade;
                idApagar = novoConvidado.Id;
                function editarConvidado() {
                    novoNome = document.convidado.nome.value;
                    novoIdade = document.convidado.idade.value;
                    var liEditar = document.getElementsByTagName("li")[idApagar];
                    if (novoIdade >= 18 && idade >= 18 || novoIdade < 18 && idade < 18) {
                        liEditar.textContent = novoNome + " - " + novoIdade + ".";
                        convidado.splice(idApagar, 1, liEditar.innerText);
                    } else {
                        apagarConvidado();
                        if (idade >= 18) {
                            liEditar.textContent = novoNome + " - " + novoIdade + ".";
                            listaEstudante.appendChild(liEditar);
                        } else {
                            liEditar.textContent = novoNome + " - " + novoIdade + ".";
                            listaAdulto.appendChild(liEditar);
                        }
                        console.log(convidado);
                    }
                    editar.style.display = "none";
                    apagar.style.display = "none";
                    limparFormulario();

                }
                function apagarConvidado() {
                    var liEditar = document.getElementsByTagName("li")[idApagar];
                    liEditar.textContent = "";
                    convidado.splice(idApagar, 1);
                    editar.style.display = "none";
                    apagar.style.display = "none";
                    limparFormulario();
                }


            }
        }
        function limparFormulario() {
            document.forms.convidado.reset();
            document.forms.convidado.nome.focus();
        }
    </script>

</body>

</html>